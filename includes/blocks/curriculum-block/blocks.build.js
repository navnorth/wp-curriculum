!function(e){function r(c){if(t[c])return t[c].exports;var l=t[c]={i:c,l:!1,exports:{}};return e[c].call(l.exports,l,l.exports,r),l.l=!0,l.exports}var t={};r.m=e,r.c=t,r.d=function(e,t,c){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:c})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=0)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});t(1)},function(e,r,t){"use strict";var c=t(2),l=(t.n(c),t(3)),__=(t.n(l),wp.i18n.__),n=wp.blocks.registerBlockType,a=wp.blockEditor.InspectorControls,u=wp.components.PanelBody,o=wp.components,s=(o.CheckboxControl,o.RadioControl,o.TextControl,o.ToggleControl,o.SelectControl,wp.data.withSelect,5),i="modified";(0,wp.data.dispatch)("core").addEntities([{name:"taxquery",kind:"curriculum/v2",baseURL:"/curriculum/v2/taxquery"}]),n("cgb/block-curriculum-block",{title:__("Curriculum Block"),icon:"welcome-learn-more",description:__("Use this block to add a list of curriculum based on subject"),category:"oer-block-category",keywords:[__("curriculum-block"),__("CGB Example"),__("create-guten-block")],attributes:{blockid:{type:"string"},curriculums:{type:"object"},categories:{type:"object"},selectedCategory:{type:"string"},postsPerPage:{type:"string"},sortBy:{type:"string"}},edit:function(e){function r(e,r){if(e.target.checked)p.push(e.target.getAttribute("data"));else{var t=p.indexOf(parseInt(e.target.getAttribute("data")));t>-1&&p.splice(t,1)}n({selectedCategory:p.toString()}),s=l.postsPerPage,i=l.sortBy;var c="";c="title"==i?"asc":"desc",""!=p?wp.apiFetch({url:"/wp-json/curriculum/v2/taxquery?perpage="+s+"&terms="+p+"&orderby="+i+"&order="+c}).then(function(e){n({curriculums:e})}):wp.apiFetch({url:"/wp-json/curriculum/v2/taxquery?terms=0"}).then(function(e){n({curriculums:e})})}function t(e){n({postsPerPage:e.target.value}),s=e.target.value;var r="";r="title"==i?"asc":"desc",""!=p?wp.apiFetch({url:"/wp-json/curriculum/v2/taxquery?perpage="+s+"&terms="+p+"&orderby="+i+"&order="+r}).then(function(e){n({curriculums:e})}):wp.apiFetch({url:"/wp-json/curriculum/v2/taxquery?terms=0"}).then(function(e){n({curriculums:e})})}function c(e){n({sortBy:e.target.value}),i=e.target.value;var r="";r="title"==i?"asc":"desc",""!=p?wp.apiFetch({url:"/wp-json/curriculum/v2/taxquery?perpage="+s+"&terms="+p+"&orderby="+i+"&order="+r}).then(function(e){n({curriculums:e})}):wp.apiFetch({url:"/wp-json/curriculum/v2/taxquery?terms=0"}).then(function(e){n({curriculums:e})})}var l=e.attributes,n=e.setAttributes,o=oercurr_cb_cgb_Global.preview_url;if(wp.data.select("core/block-editor").getBlocks().map(function(e){if("cgb/block-curriculum-block"==e.name){var r="cb"+(new Date).getTime(),t=e.clientId;wp.data.select("core/block-editor").getBlockAttributes(t).blockid||wp.data.dispatch("core/block-editor").updateBlockAttributes(t,{blockid:r,postsPerPage:5,sortBy:"modified"})}}),!l.blockid&&!l.postsPerPage&&!l.sortBy)return wp.element.createElement("img",{src:o,width:"100%"});var p=[];if("undefined"!=typeof l.selectedCategory){var m=l.selectedCategory.split(","),_=m.indexOf("");_>-1&&m.splice(_,1),m.map(function(e){p.push(parseInt(e))})}if(l.postsPerPage?s=l.postsPerPage:n({postsPerPage:s}),l.sortBy?i=l.sortBy:n({sortBy:i}),l.categories||wp.apiFetch({url:"/wp-json/curriculum/v2/catquery"}).then(function(e){n({categories:e})}),!l.categories)return"Loading categories...";if(l.categories&&0===l.categories.length)return"No categories found, please add some!";var d=[];if(d=l.categories,!l.curriculums){var b="";s=l.postsPerPage,i=l.sortBy,b="title"==i?"asc":"desc",""!=p?wp.apiFetch({url:"/wp-json/curriculum/v2/taxquery?perpage="+s+"&terms="+p+"&orderby="+i+"&order="+b}).then(function(e){n({curriculums:e})}):wp.apiFetch({url:"/wp-json/curriculum/v2/taxquery?terms=0"}).then(function(e){n({curriculums:e})})}if(!l.curriculums&&""!=l.selectedCategory)return"Loading curriculum ...";var w=[];if(!(w=l.curriculums)&&0!=w.length)return"Loading curriculums....";jQuery(document).on("click",".oer_curriculum_inspector_sbjt_addSubjects",function(e){jQuery(".oer_curriculum_inspector_sbjt_modal_resource_wrapper").show(300)}),jQuery(document).on("click",".oer_curriculum_inspector_sbjt_modal_wrapper_close",function(e){jQuery(".oer_curriculum_inspector_sbjt_modal_resource_wrapper").hide(300)}),jQuery(document).on("keyup",function(e){var r=e.keyCode?e.keyCode:e.which,t=jQuery(".oer_curriculum_inspector_wrapper .oer_curriculum_inspector_sbjt_modal_resource_wrapper");t.is(":visible")&&27==r&&t.hide(300)});var g=[5,10,15,20,25,30],f={date:"Date Added",modified:"Date Updated",title:"Title a-z"},v="undefined"==typeof l.curriculums.length?0:l.curriculums.length;return wp.element.createElement("div",null,wp.element.createElement(a,null,wp.element.createElement(u,{title:__("Curriculum Block settings"),initialOpen:!0},wp.element.createElement("div",{class:"oer_curriculum_inspector_wrapper"},wp.element.createElement("div",{class:"oer_curriculum_inspector_sbjt_modal_resource_wrapper"},wp.element.createElement("div",{class:"oer_curriculum_inspector_sbjt_modal_content_main"},wp.element.createElement("div",{class:"oer_curriculum_inspector_sbjt_modal_wrapper_close"},wp.element.createElement("span",{class:"dashicons dashicons-no"})),wp.element.createElement("div",{class:"oer_curriculum_inspector_sbjt_modal_center"},wp.element.createElement("div",{class:"oer_curriculum_inspector_sbjt_modal_table"},wp.element.createElement("div",{class:"oer_curriculum_inspector_sbjt_modal_cell"},wp.element.createElement("div",{class:"oer_curriculum_inspector_sbjt_modal"},wp.element.createElement("div",{class:"oer_curriculum_inspector_sbjt_search_header"},"Subjects"),wp.element.createElement("div",{class:"oer_curriculum_inspector_sbjt_search_wrapper"},wp.element.createElement("div",{class:"oer_curriculum_inspector_subject"},d.map(function(e,t){return wp.element.createElement("label",{class:"components-base-control__label ls_inspector_subject_label "+e.level},wp.element.createElement("input",{checked:"undefined"!=typeof p&&-1!=p.indexOf(e.term_id)?"checked":"",id:"inspector-checkbox-control-"+t,class:"ls_inspector_subject_checkbox "+e.level,type:"checkbox",data:e.term_id,parent:e.parent,onClick:r}),e.name+" ("+e.cnt+")")}))),wp.element.createElement("div",{class:"oer_curriculum_inspector_sbjt_search_footer"})))))))),wp.element.createElement("div",{class:"oer_curriculum_inspector_wrapper"},wp.element.createElement("label",{class:"components-base-control__label",for:"oer_curriculum_inspector_subject"},"Subjects:"),wp.element.createElement("div",{class:"oer_curriculum_inspector_sbjt_addbutton_wrapper"},wp.element.createElement("div",{class:"button oer_curriculum_inspector_sbjt_addSubjects"},"Add Subjects"))),wp.element.createElement("div",{class:"oer_curriculum_inspector_wrapper oer_curriculum_inspector_Postperpage"},wp.element.createElement("label",{class:"components-base-control__label",for:"oer_curriculum_inspector_postperpage_select"},"Posts Per Page:"),wp.element.createElement("select",{id:"oer_curriculum_inspector_postperpage_select",onChange:t,value:s},g.map(function(e,r){return s==e?wp.element.createElement("option",{selected:!0,value:e},e):wp.element.createElement("option",{value:e},e)}))),wp.element.createElement("div",{class:"oer_curriculum_inspector_wrapper oer_curriculum_inspector_Postperpage"},wp.element.createElement("label",{class:"components-base-control__label",for:"oer_curriculum_inspector_postperpage_select"},"Sort By:"),wp.element.createElement("select",{id:"oer_curriculum_inspector_sortby_select",onChange:c,value:i},Object.keys(f).map(function(e){return i==e?wp.element.createElement("option",{value:e,checked:!0},f[e]):wp.element.createElement("option",{value:e},f[e])}))))),wp.element.createElement("div",{class:"oercurr-blk-main editor"},wp.element.createElement("div",{class:"oercurr-blk-topbar"},wp.element.createElement("div",{class:"oercurr-blk-topbar-left"},wp.element.createElement("span",null,"Browse All ",v," Curriculums")),wp.element.createElement("div",{class:"oercurr-blk-topbar-right"},wp.element.createElement("div",{class:"oercurr-blk-topbar-display-box"},wp.element.createElement("div",{class:"oercurr-blk-topbar-display-text"},wp.element.createElement("span",null,"Show ",s),wp.element.createElement("a",{href:"#"},wp.element.createElement("i",{class:"fa fa-th-list","aria-hidden":"true"}))),wp.element.createElement("ul",{class:"oercurr-blk-topbar-display-option oercurr-blk-topbar-option"},g.map(function(e,r){return s==e?wp.element.createElement("li",{class:"selected"},wp.element.createElement("a",{href:"#",ret:e},e)):wp.element.createElement("li",null,wp.element.createElement("a",{href:"#",ret:e},e))}))),wp.element.createElement("div",{class:"oercurr-blk-topbar-sort-box"},wp.element.createElement("div",{class:"oercurr-blk-topbar-sort-text"},wp.element.createElement("span",null,"Sort by: ",f[i]),wp.element.createElement("a",{href:"#"},wp.element.createElement("i",{class:"fa fa-sort","aria-hidden":"true"}))),wp.element.createElement("ul",{class:"oercurr-blk-topbar-sort-option oercurr-blk-topbar-option"},Object.keys(f).map(function(e){return i==e?wp.element.createElement("li",{class:"selected"},wp.element.createElement("a",{href:"#",ret:e},f[e])):wp.element.createElement("li",null,wp.element.createElement("a",{href:"#",ret:e},f[e]))}))))),wp.element.createElement("div",{id:"oer_curriculum_cur_blk_content_wrapper",class:"oercurr-blk-wrapper"},wp.element.createElement("div",{id:"oercurr-blk-content_drop"},w.map(function(e,r){if(l.curriculums.length>0){var t=e.content.replace(/<[^>]+>/g,"");t.length<=180?t+="....":t=t.substr(1,180)+"...";var c=0,n="";return""!=e.oer_curriculum_grades?e.oer_curriculum_grades.length>1?(n="Grades: ",c=e.oer_curriculum_grades[0]+"-"+e.oer_curriculum_grades[e.oer_curriculum_grades.length-1]):(n="Grade: ",c=e.oer_curriculum_grades):(n="",c=""),wp.element.createElement("div",{class:"oercurr-blk-row"},wp.element.createElement("a",{href:e.link,class:"oercurr-blk-left",target:"_new"},wp.element.createElement("img",{src:e.featured_image_url,alt:""})),wp.element.createElement("div",{class:"oercurr-blk-right"},wp.element.createElement("div",{class:"ttl"},wp.element.createElement("a",{href:e.link,target:"_new"},e.title)),wp.element.createElement("div",{class:"oercurr-postmeta"},wp.element.createElement("span",{class:"oercurr-postmeta-grades"},wp.element.createElement("strong",null,n),c)),wp.element.createElement("div",{class:"desc"},t),wp.element.createElement("div",{class:"oercurr-tags tagcloud"},e.tagsv2.map(function(e,r){var t=e.split("|");return wp.element.createElement("span",null,wp.element.createElement("a",{href:oercurr_cb_cgb_Global.base_url+"/tag/"+t[1],alt:"",class:"button",target:"_new"},t[0]))}))))}})))))},save:function(e){return null},example:{}})},function(e,r){},function(e,r){}]);